(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{724:(e,t,a)=>{"use strict";a.d(t,{y:()=>n});var s=a(1367),l=a.n(s);function n(e,t){var a,s,n;let r=null!==(a=null==t?void 0:t.minLength)&&void 0!==a?a:3,o=null!==(s=null==t?void 0:t.maxLength)&&void 0!==s?s:15,c=null!==(n=null==t?void 0:t.label)&&void 0!==n?n:"Kallenavn";return e.length<r?"".concat(c," m\xe5 v\xe6re minst ").concat(r," tegn."):e.length>o?"".concat(c," kan ikke v\xe6re lengre enn ").concat(o," tegn."):/^[A-Za-zÆØÅæøå0-9_ ]+$/.test(e)?l().check(e)||l().list().some(t=>e.toLowerCase().includes(t))?"Dette kallenavnet inneholder upassende spr\xe5k.":null:"Kallenavn kan kun inneholde bokstaver, tall, mellomrom og understrek."}},3792:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(7876),l=a(4232),n=a(300),r=a(9099),o=a(4957),c=a(724),i=a(7685);function d(){let{userData:e}=(0,n.r)(),[t,a]=(0,l.useState)([]),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[f,p]=(0,l.useState)(null),[g,k]=(0,l.useState)(""),[v,b]=(0,l.useState)(""),[x,y]=(0,l.useState)(!1),[w,N]=(0,l.useState)(null),[j,S]=(0,l.useState)(null),T=(0,r.useRouter)(),_=e=>{let t=e.target.value;k(t),N((0,c.y)(t))};(0,l.useEffect)(()=>{(null==e?void 0:e.accessToken)&&(async()=>{try{let t=await fetch("https://kortreistbackend-fqd2g9dnf5bedxhc.norwayeast-01.azurewebsites.net/api/Profile/allComp",{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!t.ok)throw Error("Feil ved henting av selskaper");let s=await t.json();a(s)}catch(e){console.error(e)}})()},[null==e?void 0:e.accessToken]),(0,l.useEffect)(()=>{(null==e?void 0:e.accessToken)&&(async()=>{try{let t=await fetch("https://kortreistbackend-fqd2g9dnf5bedxhc.norwayeast-01.azurewebsites.net/api/Profile/getUser",{headers:{Authorization:"Bearer ".concat(e.accessToken)}});if(!t.ok)throw Error("Feil ved henting av brukerdata: ".concat(t.statusText));let a=await t.json();u(a),a.companyId&&h(a.companyId),a.nickName&&(k(a.nickName),_({target:{value:a.nickName}})),a.address&&b(a.address)}catch(e){console.error(e)}})()},[null==e?void 0:e.accessToken]);let A=async t=>{t.preventDefault();let a=!1;if(w){i.Ay.error("Vennligst sjekk kallenavnet ditt.");return}if(m?p(""):(p("Du m\xe5 velge et selskap."),a=!0),v.trim()?S(""):(S("Addressefeltet kan ikke st\xe5 tomt."),a=!0),!a){if(!(null==e?void 0:e.accessToken)||!m||!g||!v){i.Ay.error("Vennligst fyll ut alle feltene.");return}y(!0);try{if(!(await fetch("https://kortreistbackend-fqd2g9dnf5bedxhc.norwayeast-01.azurewebsites.net/api/Profile/companySet",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)},body:JSON.stringify({companyId:m,nickName:g,address:v})})).ok)throw Error("Klarte ikke oppdatere profil");console.log("Brukerdata oppdatert"),T.push("/")}catch(e){console.error(e)}finally{y(!1)}}};return(0,s.jsx)("div",{className:"bg-customYellow2 p-6 flex flex-col justify-center items-center",children:(0,s.jsxs)("div",{className:"w-full max-w-md bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-customViolet mb-6 text-center",children:"Fullf\xf8r profilen din"}),(0,s.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Velg selskap:"}),(0,s.jsxs)("select",{className:"w-full p-3 mb-4 rounded border",value:null!=m?m:"",onChange:e=>h(Number(e.target.value)),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Velg et selskap"}),t.map(e=>(0,s.jsx)("option",{value:e.companyId,children:e.name},e.companyId))]}),f&&(0,s.jsx)("p",{className:"text-customRed -mt-4 text-sm py-2",children:f}),(0,s.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Kallenavn:"}),(0,s.jsx)("input",{type:"text",className:"w-full p-3 mb-1 rounded border",value:g,onChange:_,placeholder:"F.eks. SuperPer"}),w&&(0,s.jsx)("p",{className:"text-customRed text-sm mb-4",children:w}),(0,s.jsx)("label",{className:"block mb-2 font-medium text-gray-700",children:"Adresse:"}),(0,s.jsx)(o.A,{selectedAddress:v,setSelectedAddress:b}),j&&(0,s.jsx)("p",{className:"text-customRed -mt-2 text-sm py-2",children:j}),(0,s.jsx)("button",{onClick:A,disabled:x||!!w,className:"w-full bg-customViolet text-white p-3 rounded font-semibold hover:opacity-90 transition",children:x?"Lagrer...":"Fullf\xf8r"})]})})}},4957:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(7876),l=a(4232);let n=["Osloveien 1, Oslo","Storgata 5, Bergen","Trondheimsveien 10, Trondheim","Havnegata 7, Troms\xf8","Markens gate 3, Kristiansand"];function r(e){let{selectedAddress:t,setSelectedAddress:a,inputBgClass:r="bg-white"}=e,[o,c]=(0,l.useState)(t),[i,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c(t)},[t]);let u=n.filter(e=>e.toLowerCase().includes(o.toLowerCase())),m=e=>{c(e),a(e),d(!1)};return(0,s.jsxs)("div",{className:"address-autocomplete relative",children:[(0,s.jsxs)("div",{className:"relative mb-2",children:[(0,s.jsx)("input",{type:"text",value:o,placeholder:"F.eks. Storgata 1, Oslo",onChange:e=>c(e.target.value),onFocus:()=>d(!0),onBlur:()=>{setTimeout(()=>{d(!1),o!==t&&c(t)},150)},className:"w-full p-3 pr-8 rounded border border-gray-300 ".concat(r," focus:outline-none focus:ring-2 focus:ring-customViolet")}),o&&(0,s.jsx)("div",{className:"absolute right-2 top-2.5 w-6 h-6 flex items-center justify-center z-10",children:(0,s.jsx)("button",{type:"button",onClick:()=>{c(""),a("")},className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:"\xd7"})})]}),i&&o.trim()&&(0,s.jsx)("ul",{className:"absolute z-10 w-full border border-gray-200 rounded shadow-md bg-white max-h-60 overflow-y-auto",children:u.length>0?u.map((e,t)=>(0,s.jsx)("li",{onMouseDown:()=>m(e),className:"p-2 hover:bg-gray-100 cursor-pointer",children:e},t)):(0,s.jsxs)("li",{className:"p-2 text-gray-500",children:["Ingen treff p\xe5 “",o,"”"]})})]})}},6250:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/onboarding",function(){return a(3792)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6250)),_N_E=e.O()}]);